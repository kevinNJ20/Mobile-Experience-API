#%RAML 1.0
title: Mobile Experience API
version: 1.0.0
baseUri: http://localhost:8094/api
mediaType: application/json

documentation:
  - title: Overview
    content: API d'expérience mobile pour fournir une vue financière optimisée pour les applications mobiles

types:
  FinancialSummary:
    type: object
    properties:
      customer:
        type: object
        properties:
          globalId: string
          customerNumber?: string
          name?: string
      accounts:
        type: array
        items:
          type: object
          properties:
            globalId?: string
            accountNumber: string
            accountType: string
            accountName?: string
            balance?: number
            availableBalance?: number
            currency?: string
      cards:
        type: array
        items:
          type: object
          properties:
            globalId?: string
            cardNumber: string
            cardType: string
            availableCredit?: number
            creditLimit?: number
      totalBalance?: number
      totalAvailableCredit?: number
  ErrorResponse:
    type: object
    properties:
      error:
        type: object
        properties:
          code: string
          message: string

/customers/{customerGlobalId}:
  displayName: Customer Financial Summary
  uriParameters:
    customerGlobalId:
      type: string
      description: Identifiant global unique du client
  get:
    displayName: Get Mobile Financial Summary
    description: Récupère un résumé financier optimisé pour mobile
    responses:
      200:
        body:
          application/json:
            type: FinancialSummary
      400:
        body:
          application/json:
            type: ErrorResponse
      404:
        body:
          application/json:
            type: ErrorResponse
      500:
        body:
          application/json:
            type: ErrorResponse
  
  /accounts/{accountGlobalId}:
    displayName: Account Details
    uriParameters:
      accountGlobalId:
        type: string
        description: Identifiant global unique du compte
    
    /transactions:
      displayName: Account Transactions
      get:
        displayName: Get Account Transactions
        description: Récupère les transactions d'un compte
        queryParameters:
          limit:
            type: integer
            required: false
            default: 100
          offset:
            type: integer
            required: false
            default: 0
        responses:
          200:
            body:
              application/json:
                type: array
                items:
                  type: object
                  properties:
                    globalId?: string
                    transactionNumber: string
                    transactionType: string
                    amount: number
                    currency: string
                    transactionDate: string
                    description: string
                    status: string
          400:
            body:
              application/json:
                type: ErrorResponse
          500:
            body:
              application/json:
                type: ErrorResponse
      
      /{transactionGlobalId}:
        displayName: Transaction Dispute
        uriParameters:
          transactionGlobalId:
            type: string
            description: Identifiant global unique de la transaction
        
        /dispute:
          displayName: Dispute Transaction
          put:
            displayName: Dispute Transaction
            description: Contester une transaction
            body:
              application/json:
                type: object
                properties:
                  disputeStatus?: string
                  disputeReason?: string
            responses:
              200:
                body:
                  application/json:
                    type: object
                    properties:
                      globalId: string
                      transactionNumber: string
                      status: string
                      disputeStatus?: string
                      disputeReason?: string
              400:
                body:
                  application/json:
                    type: ErrorResponse
              404:
                body:
                  application/json:
                    type: ErrorResponse
              500:
                body:
                  application/json:
                    type: ErrorResponse
  
  /cards/{cardGlobalId}:
    displayName: Card Controls
    uriParameters:
      cardGlobalId:
        type: string
        description: Identifiant global unique de la carte
    
    /controls:
      displayName: Card Controls
      put:
        displayName: Update Card Controls
        description: Met à jour les contrôles et limites d'une carte
        body:
          application/json:
            type: object
            properties:
              status?: string
              creditLimit?: number
              availableCredit?: number
              controls?:
                type: object
                properties:
                  dailyPurchaseLimit?: number
                  dailyATMWithdrawalLimit?: number
                  internationalTransactionsEnabled?: boolean
                  onlineTransactionsEnabled?: boolean
        responses:
          200:
            body:
              application/json:
                type: object
                properties:
                  globalId?: string
                  cardNumber: string
                  cardType: string
                  status: string
                  creditLimit?: number
                  availableCredit?: number
                  controls?: object
          400:
            body:
              application/json:
                type: ErrorResponse
          404:
            body:
              application/json:
                type: ErrorResponse
          500:
            body:
              application/json:
                type: ErrorResponse

